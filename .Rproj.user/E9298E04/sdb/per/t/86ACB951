{
    "collab_server" : "",
    "contents" : "data {\n  int N;  //number of grid cells\n  int L;  //number of land cover classes\n  int nB_d;  //number of bias covariates\n  row_vector[L] Y1[N];  //GRANIT proportions\n  row_vector[L-1] Y2[N];  //NLCD proportions\n  matrix[N,nB_d] X_d;  //bias covariates\n  vector<lower=0, upper=1>[N] p;  //pr(WP|Evg)\n}\nparameters {\n  cholesky_factor_corr[L] L_Omega;  //covariance matrix for Y1 & Y2.ds from nu\n  vector<lower=0>[L] L_sigma;  //covariance matrix for Y1 & Y2.ds from nu\n  row_vector<lower=0, upper=1>[L] nu[N];  //latent LC proportions\n  matrix[nB_d,L-1] beta_d;\n}\ntransformed parameters {\n  row_vector[L-1] Y2_d[N];  //de-biased NLCD proportions\n  row_vector[L] Y2_ds[N];  //de-biased and split NLCD proportions\n  matrix<lower=-1, upper=1>[N,L-1] d; //bias between NLCD and nu\n  \n  //estimate bias\n  d = X_d * beta_d;\n  \n  for(n in 1:N) {                       // POSSIBLE TO VECTORIZE? //\n    //de-bias NLCD proportions\n    Y2_d[n] = Y2[n] + d[n];\n    //split WP to [,5] and Evg to [,6]\n    Y2_ds[n,5] = Y2_d[n,5]*(1-p[n]);\n    Y2_ds[n,6] = Y2_d[n,5]*p[n];\n  }\n  Y2_ds[,1:4] = Y2_d[,1:4];\n}\nmodel {\n  //priors\n  matrix[L,L] L_Sigma;\n  L_Sigma = diag_pre_multiply(L_sigma, L_Omega);\n  L_Omega ~ lkj_corr_cholesky(4);\n  L_sigma ~ cauchy(0, 2.5);\n  for(n in 1:N) {\n    nu[n] ~ uniform(0,1);\n  }\n  to_vector(beta_d) ~ normal(0, 1);\n  \n  //likelihood\n   Y1 ~ multi_normal_cholesky(nu, L_Sigma);\n   Y2_ds ~ multi_normal_cholesky(nu, L_Sigma);\n}\n",
    "created" : 1498605005471.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1177122751",
    "id" : "86ACB951",
    "lastKnownWriteTime" : 1498611747,
    "last_content_update" : 1498611747487,
    "path" : "~/Documents/UNH/mod_veg/mod_sandbox/veg_SB1_5.stan",
    "project_path" : "mod_sandbox/veg_SB1_5.stan",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 3,
    "source_on_save" : true,
    "source_window" : "",
    "type" : "stan"
}